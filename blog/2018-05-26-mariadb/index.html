<!doctype html><html lang=en-us style=max-width:1000px;margin:auto><head><title>Kevin Blog</title><meta name=theme-color content><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta name=description content="Kevin learning"><meta name=author content="Kevin Chen"><meta name=generator content="aafu theme by Darshan in Hugo 0.83.0"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.15.2/css/all.css integrity=sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu crossorigin=anonymous><link rel=stylesheet href=https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Didact+Gothic%7CRoboto:400%7CRoboto+Mono"><link rel=stylesheet href=/css/aafu_pinkish.css><link rel=stylesheet href=/css/aafu.css><script>var themeColor=document.querySelector("meta[name=theme-color]");window.onload=()=>{themeColor.content=getComputedStyle(document.body)["background-color"];let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")},window.onresize=()=>{let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")}</script></head><body class=container><main style="min-height:calc(100vh - 60px)"><div class="d-flex flex-row row p-2"><h3 class="main-menu mr-3"><a href=https://cch0124.github.io/>Home</a></h3><h3 class="main-menu mr-3"><a href=/blog>Blog</a></h3><h3 class="main-menu mr-3"><a href=/project>Project</a></h3><h3 class="main-menu mr-3"><a href=/life>Life</a></h3><h3 class="main-menu mr-3"><a href=/kubernetes>Kubernetes</a></h3><h3 class="main-menu mr-3"><a href=/code>Coding</a></h3></div><div class=mb-3><h1 class=top-h1 style=font-size:2.75em>mariadb 安裝使用</h1><p class=mb-1>May 26, 2018</p><p>&mdash;</p></div><div class=content><h1 id=mariadb-install>mariadb install</h1><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo apt install mariadb-server -y
</code></pre></div><p>設定檔 <code>/etc/mysql</code>
log <code>/var/log/mysql</code></p><p>服務使用</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo systemctl start mysql.service
$ sudo systemctl stop mysql.service
$ sudo systemctl restart mysql.service
$ sudo systemctl status mysql.service
</code></pre></div><h3 id=mariadb-connect>mariadb connect</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo mysql <span style=color:#75715e># 預設無密碼登入</span>
Welcome to the MariaDB monitor.  Commands end with ; or <span style=color:#ae81ff>\g</span>.
Your MariaDB connection id is <span style=color:#ae81ff>43</span>
Server version: 10.0.38-MariaDB-0ubuntu0.16.04.1 Ubuntu 16.04

Copyright <span style=color:#f92672>(</span>c<span style=color:#f92672>)</span> 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type <span style=color:#e6db74>&#39;help;&#39;</span> or <span style=color:#e6db74>&#39;\h&#39;</span> <span style=color:#66d9ef>for</span> help. Type <span style=color:#e6db74>&#39;\c&#39;</span> to clear the current input statement.

MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt;

</code></pre></div><h3 id=with-password-login-mariadb>with password login mariadb</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysql -h HOST -u USER -p PASSWORD
</code></pre></div><p>mariadb 設定密碼</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo mysql
Welcome to the MariaDB monitor.  Commands end with ; or <span style=color:#ae81ff>\g</span>.
Your MariaDB connection id is <span style=color:#ae81ff>45</span>
Server version: 10.0.38-MariaDB-0ubuntu0.16.04.1 Ubuntu 16.04

Copyright <span style=color:#f92672>(</span>c<span style=color:#f92672>)</span> 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type <span style=color:#e6db74>&#39;help;&#39;</span> or <span style=color:#e6db74>&#39;\h&#39;</span> <span style=color:#66d9ef>for</span> help. Type <span style=color:#e6db74>&#39;\c&#39;</span> to clear the current input statement.

MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; use mysql;
Reading table information <span style=color:#66d9ef>for</span> completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
MariaDB <span style=color:#f92672>[</span>mysql<span style=color:#f92672>]</span>&gt; UPDATE user set password<span style=color:#f92672>=</span>PASSWORD<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;passw0rd&#34;</span><span style=color:#f92672>)</span> WHERE User<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;root&#39;</span>;
Query OK, <span style=color:#ae81ff>1</span> row affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
Rows matched: <span style=color:#ae81ff>1</span>  Changed: <span style=color:#ae81ff>1</span>  Warnings: <span style=color:#ae81ff>0</span>

MariaDB <span style=color:#f92672>[</span>mysql<span style=color:#f92672>]</span>&gt; flush privileges;
Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>

MariaDB <span style=color:#f92672>[</span>mysql<span style=color:#f92672>]</span>&gt; UPDATE user set plugin<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;&#39;</span> WHERE User<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;root&#39;</span>; <span style=color:#75715e># 移除免密碼設定</span>
Query OK, <span style=color:#ae81ff>1</span> row affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>
Rows matched: <span style=color:#ae81ff>1</span>  Changed: <span style=color:#ae81ff>1</span>  Warnings: <span style=color:#ae81ff>0</span>

MariaDB <span style=color:#f92672>[</span>mysql<span style=color:#f92672>]</span>&gt; flush privileges;
Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>

MariaDB <span style=color:#f92672>[</span>mysql<span style=color:#f92672>]</span>&gt;

</code></pre></div><h3 id=mysql-database-management>Mysql Database Management</h3><h5 id=create-database>create Database</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; CREATE DATABASE wordpress; <span style=color:#75715e># 建立資料庫</span>
Query OK, <span style=color:#ae81ff>1</span> row affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>

MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| wordpress          |
+--------------------+
<span style=color:#ae81ff>4</span> rows in set <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>

MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt;
</code></pre></div><h5 id=selection-database>selection database</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt; use wordpress; <span style=color:#75715e># 使用 use 切換要使用的 DB</span>
Database changed
</code></pre></div><h5 id=delete-database>delete database</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>MariaDB <span style=color:#f92672>[</span>wordpress<span style=color:#f92672>]</span>&gt; DROP database wordpress; <span style=color:#75715e># DROP 刪除 DB</span>
Query OK, <span style=color:#ae81ff>0</span> rows affected <span style=color:#f92672>(</span>0.00 sec<span style=color:#f92672>)</span>

MariaDB <span style=color:#f92672>[(</span>none<span style=color:#f92672>)]</span>&gt;

</code></pre></div><h5 id=back-up-a-database>Back up a database</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysqldump DESTINATION_DB -u USER -p &gt; BACKUP_FILE_NAME
</code></pre></div><h5 id=back-up-all-databases>Back up all databases</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysqldump -all-databases -u USER -p &gt; BACKUP_FILE_NAME
</code></pre></div><h5 id=mysqladmin>mysqladmin</h5><p>算是一個管理 Mysql 的指令。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ mysqladmin -uroot -pPASSWORD create DB_NAME
$ mysqladmin -uroot -pPASSWORD drop DB_NAME
$ mysqladmin -uroot -pPASSWORD shutdown
</code></pre></div></div><div class="d-flex flex-row justify-content-around"><h3 class="mb-1 mt-1 text-left mr-4"><a href=/blog/2018-03-30-docker-run/ title="Docker 資源詳解"><i class="nav-menu fas fa-chevron-circle-left"></i></a></h3><h3 class="mb-1 mt-1 text-left ml-4"><a href=/blog/2018-05-28-nginx-php-fpm-mysql/ title="LNMP 與 wordpress"><i class="nav-menu fas fa-chevron-circle-right"></i></a></h3></div></main><footer class="mt-2 mb-4 text-center"><span class=markdownify>short copyright message</span>
<span>&#183;
<i><a href=https://github.com/darshanbaral/aafu>aafu</a></i>
by
<a href=https://www.darshanbaral.com/>darshan</a></span></footer></body></html>