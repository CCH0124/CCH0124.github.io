<!doctype html><html lang=en-us style=max-width:1000px;margin:auto><head><title>Kevin Blog</title><meta name=theme-color content><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta name=description content="Kevin learning"><meta name=author content="Kevin Chen"><meta name=generator content="aafu theme by Darshan in Hugo 0.83.0"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.15.2/css/all.css integrity=sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu crossorigin=anonymous><link rel=stylesheet href=https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Didact+Gothic%7CRoboto:400%7CRoboto+Mono"><link rel=stylesheet href=/css/aafu_pinkish.css><link rel=stylesheet href=/css/aafu.css><script>var themeColor=document.querySelector("meta[name=theme-color]");window.onload=()=>{themeColor.content=getComputedStyle(document.body)["background-color"];let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")},window.onresize=()=>{let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")}</script></head><body class=container><main style="min-height:calc(100vh - 60px)"><div class="d-flex flex-row row p-2"><h3 class="main-menu mr-3"><a href=https://cch0124.github.io/>Home</a></h3><h3 class="main-menu mr-3"><a href=/blog>Blog</a></h3><h3 class="main-menu mr-3"><a href=/project>Project</a></h3><h3 class="main-menu mr-3"><a href=/life>Life</a></h3><h3 class="main-menu mr-3"><a href=/kubernetes>Kubernetes</a></h3><h3 class="main-menu mr-3"><a href=/code>Coding</a></h3></div><div class=mb-3><h1 class=top-h1 style=font-size:2.75em>LVM（Logical Volume Manager）</h1><p class=mb-1>April 16, 2017</p><p>&mdash;</p></div><div class=content><h1 id=什麼是-lvm>什麼是 LVM</h1><ul><li>可彈性調整檔案<strong>磁區</strong>大小<ul><li>Physical Volume, PV（實體卷宗）</li><li>Volume Group, VG（卷宗群組）</li><li>Logical Volume, LV（邏輯卷宗）</li></ul></li></ul><p><img src=https://i.imgur.com/5UkyY4z.png alt></p><ul><li>非效能取向</li><li>寫入方式<ul><li>線性（預設）<ul><li>A partition 用完時，在使用 B partition</li></ul></li><li>交錯（像 RAID 0）<ul><li>一份資料用兩顆硬碟來寫入的概念
<img src=https://i.imgur.com/MuIyf8d.png alt></li></ul></li></ul></li></ul><blockquote><p>LVM 可以整合多個實體 partition 在一起， 讓這些 partitions 看起來就像是一個磁碟一樣。還可以在未來新增或移除其他的實體 partition 到這個 LVM 管理的磁碟當中。 by 鳥歌</p></blockquote><h2 id=physical-volume-pv>Physical Volume, PV</h2><p>利用 <code>fdisk</code> 將劃分的硬碟調整 <code>system ID</code> 為 <code>8e</code></p><ul><li>pvcreate<ul><li>將實體磁區建立為 PV</li></ul></li><li>pvscan<ul><li>列出系統中 PV 磁區</li></ul></li><li>pvdisplay<ul><li>顯示系統上 PV 狀態</li></ul></li><li>pvremove<ul><li>將 PV 屬性移除</li></ul></li></ul><p><img src=https://i.imgur.com/XCtA601.png alt></p><h2 id=volume-group-vg>Volume Group, VG</h2><p><code>VG</code> 就是 <code>LVM</code> 組合起來的大磁碟，多個 <code>PV</code> 組合而成。</p><ul><li>vgcreate<ul><li>建立 VG</li></ul></li><li>vgscan<ul><li>列出系統中 VG 的卷區</li></ul></li><li>vgdisplay<ul><li>顯示系統上 VG 狀態</li></ul></li><li>vgremove<ul><li>將 VG 移除</li></ul></li><li>vgextend<ul><li>VG 內新增加額外 PV</li></ul></li><li>vgreduce<ul><li>在 VG 內移除 PV</li></ul></li><li>vgchange<ul><li>設定 VG 是否啟動</li></ul></li></ul><h2 id=logical-volume-lv>Logical Volume, LV</h2><p>最後用來格式化，建立分割區，最後裝置名稱為 <code>/dev/vg_NAME/lv_name</code></p><ul><li>lvcreate<ul><li>建立 LV</li><li>&ndash;size 設定大小</li><li>-n 設定名稱</li><li>-p 設定存取權限（r、rw）</li><li>-s 設定快照</li></ul></li><li>lvscan<ul><li>列出系統中 LV 的卷區</li></ul></li><li>lvdisplay<ul><li>顯示系統中 LV 狀態</li></ul></li><li>lvremove<ul><li>將 LV 移除</li></ul></li><li>lvextend<ul><li>LV 內增加容量</li></ul></li><li>lvreduce<ul><li>LV 內減少容量</li></ul></li><li>lvresize<ul><li>調整 LV 容量大小</li></ul></li></ul><h2 id=pvvglv-整理>PV、VG、LV 整理</h2><p><img src=https://i.imgur.com/pK2IPOA.png alt=&ldquo;鳥歌&rdquo;></p><h2 id=實作>實作</h2><p>/dev/sdb 新增一顆 1GB 硬碟，切分三個 LVM 磁區分別為 100 MB。</p><p>以下是變換預設磁區為 <code>LVM</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>Command <span style=color:#f92672>(</span>m <span style=color:#66d9ef>for</span> help<span style=color:#f92672>)</span>: t
Partition number <span style=color:#f92672>(</span>1-3, default 3<span style=color:#f92672>)</span>: <span style=color:#ae81ff>1</span>
Partition type <span style=color:#f92672>(</span>type L to list all types<span style=color:#f92672>)</span>: 8e

Changed type of partition <span style=color:#e6db74>&#39;Linux&#39;</span> to <span style=color:#e6db74>&#39;Linux LVM&#39;</span>.

Command <span style=color:#f92672>(</span>m <span style=color:#66d9ef>for</span> help<span style=color:#f92672>)</span>: t
Partition number <span style=color:#f92672>(</span>1-3, default 3<span style=color:#f92672>)</span>: <span style=color:#ae81ff>2</span>
Partition type <span style=color:#f92672>(</span>type L to list all types<span style=color:#f92672>)</span>: 8e

Changed type of partition <span style=color:#e6db74>&#39;Linux&#39;</span> to <span style=color:#e6db74>&#39;Linux LVM&#39;</span>.

Command <span style=color:#f92672>(</span>m <span style=color:#66d9ef>for</span> help<span style=color:#f92672>)</span>: t
Partition number <span style=color:#f92672>(</span>1-3, default 3<span style=color:#f92672>)</span>: <span style=color:#ae81ff>3</span>
Partition type <span style=color:#f92672>(</span>type L to list all types<span style=color:#f92672>)</span>: 8e

Changed type of partition <span style=color:#e6db74>&#39;Linux&#39;</span> to <span style=color:#e6db74>&#39;Linux LVM&#39;</span>.

Command <span style=color:#f92672>(</span>m <span style=color:#66d9ef>for</span> help<span style=color:#f92672>)</span>: p
Disk /dev/sdb: <span style=color:#ae81ff>1</span> GiB, <span style=color:#ae81ff>1073741824</span> bytes, <span style=color:#ae81ff>2097152</span> sectors
Units: sectors of <span style=color:#ae81ff>1</span> * 512 <span style=color:#f92672>=</span> <span style=color:#ae81ff>512</span> bytes
Sector size <span style=color:#f92672>(</span>logical/physical<span style=color:#f92672>)</span>: <span style=color:#ae81ff>512</span> bytes / <span style=color:#ae81ff>512</span> bytes
I/O size <span style=color:#f92672>(</span>minimum/optimal<span style=color:#f92672>)</span>: <span style=color:#ae81ff>512</span> bytes / <span style=color:#ae81ff>512</span> bytes
Disklabel type: dos
Disk identifier: 0x49871a65

Device     Boot  Start    End Sectors  Size Id Type
/dev/sdb1         <span style=color:#ae81ff>2048</span> <span style=color:#ae81ff>206847</span>  <span style=color:#ae81ff>204800</span>  100M 8e Linux LVM
/dev/sdb2       <span style=color:#ae81ff>206848</span> <span style=color:#ae81ff>411647</span>  <span style=color:#ae81ff>204800</span>  100M 8e Linux LVM
/dev/sdb3       <span style=color:#ae81ff>411648</span> <span style=color:#ae81ff>616447</span>  <span style=color:#ae81ff>204800</span>  100M 8e Linux LVM
</code></pre></div><h3 id=建立三組-pv>建立三組 PV</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ <span style=color:#66d9ef>for</span> i in <span style=color:#66d9ef>$(</span>seq <span style=color:#ae81ff>1</span> 3<span style=color:#66d9ef>)</span> ; <span style=color:#66d9ef>do</span> sudo pvcreate /dev/sdb$i; <span style=color:#66d9ef>done</span>
  Physical volume <span style=color:#e6db74>&#34;/dev/sdb1&#34;</span> successfully created
  Physical volume <span style=color:#e6db74>&#34;/dev/sdb2&#34;</span> successfully created
  Physical volume <span style=color:#e6db74>&#34;/dev/sdb3&#34;</span> successfully created
</code></pre></div><h3 id=掃瞄檢查-pv-狀態>掃瞄檢查 PV 狀態</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo pvscan
  PV /dev/sda5   VG ubuntu-vg       lvm2 <span style=color:#f92672>[</span>19.52 GiB / 916.00 MiB free<span style=color:#f92672>]</span>
  PV /dev/sdb3                      lvm2 <span style=color:#f92672>[</span>100.00 MiB<span style=color:#f92672>]</span>
  PV /dev/sdb1                      lvm2 <span style=color:#f92672>[</span>100.00 MiB<span style=color:#f92672>]</span>
  PV /dev/sdb2                      lvm2 <span style=color:#f92672>[</span>100.00 MiB<span style=color:#f92672>]</span>
  Total: <span style=color:#ae81ff>4</span> <span style=color:#f92672>[</span>19.81 GiB<span style=color:#f92672>]</span> / in use: <span style=color:#ae81ff>1</span> <span style=color:#f92672>[</span>19.52 GiB<span style=color:#f92672>]</span> / in no VG: <span style=color:#ae81ff>3</span> <span style=color:#f92672>[</span>300.00 MiB<span style=color:#f92672>]</span>
$ sudo pvdisplay /dev/sdb1
  <span style=color:#e6db74>&#34;/dev/sdb1&#34;</span> is a new physical volume of <span style=color:#e6db74>&#34;100.00 MiB&#34;</span>
  --- NEW Physical volume ---
  PV Name               /dev/sdb1
  VG Name
  PV Size               100.00 MiB
  Allocatable           NO
  PE Size               <span style=color:#ae81ff>0</span>
  Total PE              <span style=color:#ae81ff>0</span>
  Free PE               <span style=color:#ae81ff>0</span>
  Allocated PE          <span style=color:#ae81ff>0</span>
  PV UUID               gzH4Bq-9csW-FSRP-jSvy-pOvf-0D0S-W8mVpx
</code></pre></div><h3 id=建立-vg>建立 VG</h3><p>建立一組 VG，名稱為 bossvg 並將 <code>/dev/sdb1</code> 和 <code>/dev/sdb2</code> 加入</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo vgcreate bossvg /dev/sdb1
  Volume group <span style=color:#e6db74>&#34;bossvg&#34;</span> successfully created
$ sudo vgextend bossvg /dev/sdb2
  Volume group <span style=color:#e6db74>&#34;bossvg&#34;</span> successfully extended
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo vgscan
  Reading all physical volumes.  This may take a <span style=color:#66d9ef>while</span>...
  Found volume group <span style=color:#e6db74>&#34;ubuntu-vg&#34;</span> using metadata type lvm2
  Found volume group <span style=color:#e6db74>&#34;bossvg&#34;</span> using metadata type lvm2
cch@ubuntu:~$ sudo vgdisplay
  --- Volume group ---
  VG Name               ubuntu-vg
  System ID
  Format                lvm2
  Metadata Areas        <span style=color:#ae81ff>1</span>
  Metadata Sequence No  <span style=color:#ae81ff>3</span>
  VG Access             read/write
  VG Status             resizable
  MAX LV                <span style=color:#ae81ff>0</span>
  Cur LV                <span style=color:#ae81ff>2</span>
  Open LV               <span style=color:#ae81ff>2</span>
  Max PV                <span style=color:#ae81ff>0</span>
  Cur PV                <span style=color:#ae81ff>1</span>
  Act PV                <span style=color:#ae81ff>1</span>
  VG Size               19.52 GiB
  PE Size               4.00 MiB
  Total PE              <span style=color:#ae81ff>4997</span>
  Alloc PE / Size       <span style=color:#ae81ff>4768</span> / 18.62 GiB
  Free  PE / Size       <span style=color:#ae81ff>229</span> / 916.00 MiB
  VG UUID               Nc3WGO-0HbI-rht1-YtjR-78be-deZp-Ezc2dM

  --- Volume group ---
  VG Name               bossvg
  System ID
  Format                lvm2
  Metadata Areas        <span style=color:#ae81ff>2</span>
  Metadata Sequence No  <span style=color:#ae81ff>2</span>
  VG Access             read/write
  VG Status             resizable
  MAX LV                <span style=color:#ae81ff>0</span>
  Cur LV                <span style=color:#ae81ff>0</span>
  Open LV               <span style=color:#ae81ff>0</span>
  Max PV                <span style=color:#ae81ff>0</span>
  Cur PV                <span style=color:#ae81ff>2</span>
  Act PV                <span style=color:#ae81ff>2</span>
  VG Size               192.00 MiB
  PE Size               4.00 MiB
  Total PE              <span style=color:#ae81ff>48</span>
  Alloc PE / Size       <span style=color:#ae81ff>0</span> / <span style=color:#ae81ff>0</span>
  Free  PE / Size       <span style=color:#ae81ff>48</span> / 192.00 MiB
  VG UUID               fPJc75-tztw-Qszi-n9t9-5mfO-Vehn-F2WO9u
$ sudo pvscan
  PV /dev/sda5   VG ubuntu-vg       lvm2 <span style=color:#f92672>[</span>19.52 GiB / 916.00 MiB free<span style=color:#f92672>]</span>
  PV /dev/sdb1   VG bossvg          lvm2 <span style=color:#f92672>[</span>96.00 MiB / 96.00 MiB free<span style=color:#f92672>]</span>
  PV /dev/sdb2   VG bossvg          lvm2 <span style=color:#f92672>[</span>96.00 MiB / 96.00 MiB free<span style=color:#f92672>]</span>
  PV /dev/sdb3                      lvm2 <span style=color:#f92672>[</span>100.00 MiB<span style=color:#f92672>]</span>
  Total: <span style=color:#ae81ff>4</span> <span style=color:#f92672>[</span>19.80 GiB<span style=color:#f92672>]</span> / in use: <span style=color:#ae81ff>3</span> <span style=color:#f92672>[</span>19.71 GiB<span style=color:#f92672>]</span> / in no VG: <span style=color:#ae81ff>1</span> <span style=color:#f92672>[</span>100.00 MiB<span style=color:#f92672>]</span>
</code></pre></div><h3 id=建立一組-lv>建立一組 LV</h3><p>從 bossvg 分出 130 MB 給 bosslv，並格式化，將他 <code>mount</code> 至 <code>/mnt/templv</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo lvcreate --size 130MB -n bosslv bossvg
  Rounding up size to full physical extent 132.00 MiB
  Logical volume <span style=color:#e6db74>&#34;bosslv&#34;</span> created.
$ sudo lvscan
  ACTIVE            <span style=color:#e6db74>&#39;/dev/ubuntu-vg/root&#39;</span> <span style=color:#f92672>[</span>17.67 GiB<span style=color:#f92672>]</span> inherit
  ACTIVE            <span style=color:#e6db74>&#39;/dev/ubuntu-vg/swap_1&#39;</span> <span style=color:#f92672>[</span>976.00 MiB<span style=color:#f92672>]</span> inherit
  ACTIVE            <span style=color:#e6db74>&#39;/dev/bossvg/bosslv&#39;</span> <span style=color:#f92672>[</span>132.00 MiB<span style=color:#f92672>]</span> inherit
$ sudo lvdisplay
  --- Logical volume ---
  LV Path                /dev/ubuntu-vg/root
  LV Name                root
  VG Name                ubuntu-vg
  LV UUID                do4I3J-zub8-7rGz-h0vn-LENG-TlsX-agNYfm
  LV Write Access        read/write
  LV Creation host, time ubuntu, 2018-11-27 21:21:14 +0800
  LV Status              available
  <span style=color:#75715e># open                 1</span>
  LV Size                17.67 GiB
  Current LE             <span style=color:#ae81ff>4524</span>
  Segments               <span style=color:#ae81ff>1</span>
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     <span style=color:#ae81ff>256</span>
  Block device           252:0

  --- Logical volume ---
  LV Path                /dev/ubuntu-vg/swap_1
  LV Name                swap_1
  VG Name                ubuntu-vg
  LV UUID                DtptD7-aHhN-oqr1-fhRa-ZkSy-39HN-O13099
  LV Write Access        read/write
  LV Creation host, time ubuntu, 2018-11-27 21:21:15 +0800
  LV Status              available
  <span style=color:#75715e># open                 2</span>
  LV Size                976.00 MiB
  Current LE             <span style=color:#ae81ff>244</span>
  Segments               <span style=color:#ae81ff>1</span>
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     <span style=color:#ae81ff>256</span>
  Block device           252:1

  --- Logical volume ---
  LV Path                /dev/bossvg/bosslv
  LV Name                bosslv
  VG Name                bossvg
  LV UUID                fb7AXW-sj3u-Ut2r-SGJf-03Kl-dyFB-lUjzkI
  LV Write Access        read/write
  LV Creation host, time ubuntu, 2019-09-01 00:57:10 +0800
  LV Status              available
  <span style=color:#75715e># open                 0</span>
  LV Size                132.00 MiB
  Current LE             <span style=color:#ae81ff>33</span>
  Segments               <span style=color:#ae81ff>2</span>
  Allocation             inherit
  Read ahead sectors     auto
  - currently set to     <span style=color:#ae81ff>256</span>
  Block device           252:2
</code></pre></div><p>格式化</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo mkfs.ext4 /dev/bossvg/bosslv
mke2fs 1.42.13 <span style=color:#f92672>(</span>17-May-2015<span style=color:#f92672>)</span>
Creating filesystem with <span style=color:#ae81ff>135168</span> 1k blocks and <span style=color:#ae81ff>33864</span> inodes
Filesystem UUID: b652f4b2-5903-4c17-a6e1-86d71b41bcfe
Superblock backups stored on blocks:
        8193, 24577, 40961, 57345, <span style=color:#ae81ff>73729</span>

Allocating group tables: <span style=color:#66d9ef>done</span>
Writing inode tables: <span style=color:#66d9ef>done</span>
Creating journal <span style=color:#f92672>(</span><span style=color:#ae81ff>4096</span> blocks<span style=color:#f92672>)</span>: <span style=color:#66d9ef>done</span>
Writing superblocks and filesystem accounting information: <span style=color:#66d9ef>done</span>
</code></pre></div><p>掛載</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo mkdir /mnt/templv
cch@ubuntu:~$ sudo mount /dev/bossvg/bosslv /mnt/templv/
cch@ubuntu:~$ ls /mnt/templv/
lost+found
$ df -Th /mnt/templv/
Filesystem                Type  Size  Used Avail Use% Mounted on
/dev/mapper/bossvg-bosslv ext4  124M  1.6M  114M   2% /mnt/templv
</code></pre></div><h3 id=vg-放大>VG 放大</h3><p>再新增 30MB 空間</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo lvresize --size +30MB /dev/bossvg/bosslv
  Rounding size to boundary between physical extents: 32.00 MiB
  Size of logical volume bossvg/bosslv changed from 132.00 MiB <span style=color:#f92672>(</span><span style=color:#ae81ff>33</span> extents<span style=color:#f92672>)</span> to 164.00 MiB <span style=color:#f92672>(</span><span style=color:#ae81ff>41</span> extents<span style=color:#f92672>)</span>.
  Logical volume bosslv successfully resized.
$ sudo vgdisplay; sudo lvscan
  --- Volume group ---
  VG Name               ubuntu-vg
  System ID
  Format                lvm2
  Metadata Areas        <span style=color:#ae81ff>1</span>
  Metadata Sequence No  <span style=color:#ae81ff>3</span>
  VG Access             read/write
  VG Status             resizable
  MAX LV                <span style=color:#ae81ff>0</span>
  Cur LV                <span style=color:#ae81ff>2</span>
  Open LV               <span style=color:#ae81ff>2</span>
  Max PV                <span style=color:#ae81ff>0</span>
  Cur PV                <span style=color:#ae81ff>1</span>
  Act PV                <span style=color:#ae81ff>1</span>
  VG Size               19.52 GiB
  PE Size               4.00 MiB
  Total PE              <span style=color:#ae81ff>4997</span>
  Alloc PE / Size       <span style=color:#ae81ff>4768</span> / 18.62 GiB
  Free  PE / Size       <span style=color:#ae81ff>229</span> / 916.00 MiB
  VG UUID               Nc3WGO-0HbI-rht1-YtjR-78be-deZp-Ezc2dM

  --- Volume group ---
  VG Name               bossvg
  System ID
  Format                lvm2
  Metadata Areas        <span style=color:#ae81ff>2</span>
  Metadata Sequence No  <span style=color:#ae81ff>4</span>
  VG Access             read/write
  VG Status             resizable
  MAX LV                <span style=color:#ae81ff>0</span>
  Cur LV                <span style=color:#ae81ff>1</span>
  Open LV               <span style=color:#ae81ff>1</span>
  Max PV                <span style=color:#ae81ff>0</span>
  Cur PV                <span style=color:#ae81ff>2</span>
  Act PV                <span style=color:#ae81ff>2</span>
  VG Size               192.00 MiB
  PE Size               4.00 MiB
  Total PE              <span style=color:#ae81ff>48</span>
  Alloc PE / Size       <span style=color:#ae81ff>41</span> / 164.00 MiB
  Free  PE / Size       <span style=color:#ae81ff>7</span> / 28.00 MiB
  VG UUID               fPJc75-tztw-Qszi-n9t9-5mfO-Vehn-F2WO9u

  ACTIVE            <span style=color:#e6db74>&#39;/dev/ubuntu-vg/root&#39;</span> <span style=color:#f92672>[</span>17.67 GiB<span style=color:#f92672>]</span> inherit
  ACTIVE            <span style=color:#e6db74>&#39;/dev/ubuntu-vg/swap_1&#39;</span> <span style=color:#f92672>[</span>976.00 MiB<span style=color:#f92672>]</span> inherit
  ACTIVE            <span style=color:#e6db74>&#39;/dev/bossvg/bosslv&#39;</span> <span style=color:#f92672>[</span>164.00 MiB<span style=color:#f92672>]</span> inherit
</code></pre></div><h2 id=移除-lvm-流程>移除 LVM 流程</h2><ol><li>先卸載系統上面的 LVM 檔案系統 (包括快照與所有 LV)；</li><li>使用 lvremove 移除 LV ；</li><li>使用 vgchange -a n VGname 讓 VGname 這個 VG 不具有 Active 的標誌；</li><li>使用 vgremove 移除 VG：</li><li>使用 pvremove 移除 PV；</li><li>最後，使用 fdisk 修改 ID 回來啊！</li></ol><p>By 鳥歌</p><h2 id=參考>參考</h2><p><a href=http://linux.vbird.org/linux_basic/0420quota.php#lvm>鳥歌 LVM</a></p></div><div class="d-flex flex-row justify-content-around"><h3 class="mb-1 mt-1 text-left mr-4"><a href=/blog/2017-03-22-ssh/ title=SSH><i class="nav-menu fas fa-chevron-circle-left"></i></a></h3><h3 class="mb-1 mt-1 text-left ml-4"><a href=/blog/2017-04-21-ftp/ title="File Transfer Protocol(FTP)"><i class="nav-menu fas fa-chevron-circle-right"></i></a></h3></div></main><footer class="mt-2 mb-4 text-center"><span class=markdownify>short copyright message</span>
<span>&#183;
<i><a href=https://github.com/darshanbaral/aafu>aafu</a></i>
by
<a href=https://www.darshanbaral.com/>darshan</a></span></footer></body></html>