<!doctype html><html lang=en-us style=max-width:1000px;margin:auto><head><title>Kevin Blog</title><meta name=theme-color content><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta name=description content="Kevin learning"><meta name=author content="Kevin Chen"><meta name=generator content="aafu theme by Darshan in Hugo 0.83.0"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.15.2/css/all.css integrity=sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu crossorigin=anonymous><link rel=stylesheet href=https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Didact+Gothic%7CRoboto:400%7CRoboto+Mono"><link rel=stylesheet href=/css/aafu_pinkish.css><link rel=stylesheet href=/css/aafu.css><script>var themeColor=document.querySelector("meta[name=theme-color]");window.onload=()=>{themeColor.content=getComputedStyle(document.body)["background-color"];let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")},window.onresize=()=>{let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")}</script></head><body class=container><main style="min-height:calc(100vh - 60px)"><div class="d-flex flex-row row p-2"><h3 class="main-menu mr-3"><a href=https://cch0124.github.io/>Home</a></h3><h3 class="main-menu mr-3"><a href=/blog>Blog</a></h3><h3 class="main-menu mr-3"><a href=/project>Project</a></h3><h3 class="main-menu mr-3"><a href=/life>Life</a></h3><h3 class="main-menu mr-3"><a href=/kubernetes>Kubernetes</a></h3><h3 class="main-menu mr-3"><a href=/code>Coding</a></h3></div><div class=mb-3><h1 class=top-h1 style=font-size:2.75em>XSS</h1><p class=mb-1>December 22, 2018</p><p>&mdash;</p></div><div class=content><h1 id=xss>XSS</h1><p>XSS 為跨網站指令碼（Cross-Site Scripting），通常是網頁開發者在開發時疏忽的漏洞，攻擊著發現網站存在漏洞便會利用<code>代碼注入</code>的方式將惡意的指令碼植入該網站。</p><p>XSS 主要受害者是瀏覽被注入代碼網站的使用者，因為惡意的指令碼會被瀏覽者下載到本地端執行，藉此取得使用者的資訊。</p><h2 id=攻擊手段>攻擊手段</h2><ol><li>竊取 cookie、<a href=https://devco.re/blog/2014/06/03/http-session-protection/>session</a>，使得不需要帳號密碼即可登入。</li><li>植入惡意 Flash，例用 crossdomain 權限進一步取得更高權限</li><li>利用 javascript 以受害者身分執行特定動作</li><li>利用 javascript 對其它網站造成 <a href=http://www.freebuf.com/news/66447.html>DDos</a></li><li>利用 iframe、frame、XMLHttpRequest 以釣魚網站覆蓋原本頁面（Clicckjacking）</li><li><a href=http://www.freebuf.com/articles/web/164069.html>結合其它漏洞</a>（CSRF）進行更進一步的惡意行為。<a href=http://www.freebuf.com/vuls/144893.html>PaPy</a></li><li>傳播 XSS 蠕蟲</li><li>獲取使用者端相關資訊，如使用者的歷史紀錄</li></ol><blockquote><p>CSRF 是代替用戶完成指定的動作，需要知道其他用戶頁面的代碼和數據包。</p></blockquote><h2 id=典型跨網站指令碼>典型跨網站指令碼</h2><ul><li>DOM（Document Object Model）</li><li>反射型</li><li>儲存型</li></ul><blockquote><p>其中<code>反射型</code>和<code>DOM</code>，都是輸入便得到輸出，<code>儲存型</code>則是輸入後先儲存置資料庫，當取用時再從資料庫中取出並輸出，因此<code>儲存型</code>會把惡意代碼存到伺服器上。</p></blockquote><h3 id=dom-xss>DOM XSS</h3><blockquote><p>HTML 檔都是以 Document Object Model 進行各種<code>標籤</code>與<code>元件</code>架構而成，此類型攻擊原理由 javascript 在動態更新網頁時，從網址中提取數據並進行惡意 script 的執行。</p></blockquote><p>DOM XSS 主要是 javascript 的 API 原始碼審查的不夠嚴謹造成的，如：document.location、document.URL、document.URLUnencoded、document.referrer、window.location 等 API 都可能透過惡意設計的 URL 來控制彈跳視窗，此類型大多為網站釣魚，對系統不致造成危害，且 DOM XSS 攻擊屬於被動式攻擊，無使用者連線該 URL 即不會觸發。</p><blockquote><p>DOM XSS 可稱<code>本地端跨網站腳本攻擊</code></p></blockquote><p>參考：<a href=http://www.freebuf.com/articles/web/100413.html>JSPrime 檢測</a></p><h3 id=反射型-xss>反射型 XSS</h3><blockquote><p>反射型 XSS（Reflected Cross-site Scripting）也稱非持續性 XSS 。惡意資料輸入且伺服器沒有作任何的過濾行為的情況下反射回頁面，導致瀏覽器執行惡意代碼，此類型攻擊手法為最常見，使用也是最廣泛。</p></blockquote><p>此類型 XSS 通常是修改 URL 中網址參數，尋找為過濾並將參數內容反映在頁面上。這類型的攻擊常見於網站的 <strong><code>查詢功能</code></strong> <strong><code>使用者登入頁面</code></strong> ，再經由這些頁面竊取 cookie 或者進行網路釣魚的動作片取使用者相關資料。</p><blockquote><p>反射型 XSS 是將惡意程式碼暴露在連接上，因此有資訊安全意識者加減可以避免。因此它危害程度沒有持久型的嚴重。</p></blockquote><h3 id=儲存型-xss>儲存型 XSS</h3><p>儲存型 XSS（Persistent Cross-site Scripting），會影響到服務器本身安全，此類型不須用戶去觸發，只需瀏覽頁面即可觸發。而此類型會出現在個人資料、留言、評論，使用者使用這些功能並會將資料存在資料庫，當惡意代碼被植入這些會儲存在資料庫的功能時，此瀏覽器會執行儲存在資料庫的惡意代碼，使得用戶受到攻擊。</p><h2 id=檢測工具>檢測工具</h2><p>FireBug
Live HTTP Headers</p><h2 id=參考>參考</h2><p><a href=http://www.freebuf.com/articles/web/42727.html>XSS 原理</a></p></div><div class="d-flex flex-row justify-content-around"><h3 class="mb-1 mt-1 text-left mr-4"><a href=/blog/2018-12-10-forget-password/ title=前人沒留下資料，需要通靈><i class="nav-menu fas fa-chevron-circle-left"></i></a></h3><h3 class="mb-1 mt-1 text-left ml-4"><a href=/blog/2019-01-05-rip/ title="RIP 與子網路切割"><i class="nav-menu fas fa-chevron-circle-right"></i></a></h3></div></main><footer class="mt-2 mb-4 text-center"><span class=markdownify>short copyright message</span>
<span>&#183;
<i><a href=https://github.com/darshanbaral/aafu>aafu</a></i>
by
<a href=https://www.darshanbaral.com/>darshan</a></span></footer></body></html>