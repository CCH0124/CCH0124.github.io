<!doctype html><html lang=en-us style=max-width:1000px;margin:auto><head><title>Kevin Blog</title><meta name=theme-color content><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta name=description content="Kevin learning"><meta name=author content="Kevin Chen"><meta name=generator content="aafu theme by Darshan in Hugo 0.83.0"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.15.2/css/all.css integrity=sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu crossorigin=anonymous><link rel=stylesheet href=https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Didact+Gothic%7CRoboto:400%7CRoboto+Mono"><link rel=stylesheet href=/css/aafu_pinkish.css><link rel=stylesheet href=/css/aafu.css><script>var themeColor=document.querySelector("meta[name=theme-color]");window.onload=()=>{themeColor.content=getComputedStyle(document.body)["background-color"];let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")},window.onresize=()=>{let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")}</script></head><body class=container><main style="min-height:calc(100vh - 60px)"><div class="d-flex flex-row row p-2"><h3 class="main-menu mr-3"><a href=https://cch0124.github.io/>Home</a></h3><h3 class="main-menu mr-3"><a href=/blog>Blog</a></h3><h3 class="main-menu mr-3"><a href=/project>Project</a></h3><h3 class="main-menu mr-3"><a href=/life>Life</a></h3><h3 class="main-menu mr-3"><a href=/kubernetes>Kubernetes</a></h3><h3 class="main-menu mr-3"><a href=/code>Coding</a></h3></div><div class=mb-3><h1 class=top-h1 style=font-size:2.75em>at 和 crontab 使用</h1><p class=mb-1>September 1, 2019</p><p>&mdash;</p></div><div class=content><h2 id=工作排程>工作排程</h2><ul><li>at<ul><li>單次工作排程</li></ul></li><li>crontab<ul><li>循環定期排程</li></ul></li></ul><p>常見工作可能有，備份、自動更新、網路一些工具等。</p><h3 id=單次工作排程-at>單次工作排程 at</h3><table><thead><tr><th>參數</th><th>說明</th></tr></thead><tbody><tr><td>-m</td><td>完成後寄信</td></tr><tr><td>-l</td><td>列出系統上所有排程</td></tr><tr><td>-d</td><td>取消一個工作</td></tr><tr><td>-c</td><td>列出後面工作實際指令</td></tr></tbody></table><h5 id=example>example</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ at now +1 minutes
warning: commands will be executed using /bin/sh
at&gt; echo <span style=color:#e6db74>&#34;Test&#34;</span> &gt; ../cch/text.at
at&gt; &lt;EOT&gt;
job <span style=color:#ae81ff>3</span> at Sun Sep  <span style=color:#ae81ff>1</span> 09:17:00 <span style=color:#ae81ff>2019</span>
$ atq <span style=color:#75715e># 查排程</span>
<span style=color:#ae81ff>3</span>       Sun Sep  <span style=color:#ae81ff>1</span> 09:17:00 <span style=color:#ae81ff>2019</span> a cch

</code></pre></div><h3 id=循環定期排程-crontab>循環定期排程 crontab</h3><p>|參數|說明|
|-e|編輯所有使用帳號的 crontab|
|-l|編輯所有使用帳號的排程列表|</p><p>可針對系統作排程 <code>/etc/crontab</code></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell> <span style=color:#75715e># /etc/crontab: system-wide crontab</span>
  <span style=color:#ae81ff>2</span> <span style=color:#75715e># Unlike any other crontab you don&#39;t have to run the `crontab&#39;</span>
  <span style=color:#ae81ff>3</span> <span style=color:#75715e># command to install the new version when you edit this file</span>
  <span style=color:#ae81ff>4</span> <span style=color:#75715e># and files in /etc/cron.d. These files also have username fields,</span>
  <span style=color:#ae81ff>5</span> <span style=color:#75715e># that none of the other crontabs do.</span>
  <span style=color:#ae81ff>6</span>
  <span style=color:#ae81ff>7</span> SHELL<span style=color:#f92672>=</span>/bin/sh
  <span style=color:#ae81ff>8</span> PATH<span style=color:#f92672>=</span>/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
  <span style=color:#ae81ff>9</span>
 <span style=color:#ae81ff>10</span> <span style=color:#75715e># m h dom mon dow user  command</span>
 <span style=color:#ae81ff>11</span> <span style=color:#ae81ff>17</span> *    * * *   root    cd / <span style=color:#f92672>&amp;&amp;</span> run-parts --report /etc/cron.hourly
 <span style=color:#ae81ff>12</span> <span style=color:#ae81ff>25</span> <span style=color:#ae81ff>6</span>    * * *   root    test -x /usr/sbin/anacron <span style=color:#f92672>||</span> <span style=color:#f92672>(</span> cd / <span style=color:#f92672>&amp;&amp;</span> run-parts --report /etc/cron.daily <span style=color:#f92672>)</span>
 <span style=color:#ae81ff>13</span> <span style=color:#ae81ff>47</span> <span style=color:#ae81ff>6</span>    * * <span style=color:#ae81ff>7</span>   root    test -x /usr/sbin/anacron <span style=color:#f92672>||</span> <span style=color:#f92672>(</span> cd / <span style=color:#f92672>&amp;&amp;</span> run-parts --report /etc/cron.weekly <span style=color:#f92672>)</span>
 <span style=color:#ae81ff>14</span> <span style=color:#ae81ff>52</span> <span style=color:#ae81ff>6</span>    <span style=color:#ae81ff>1</span> * *   root    test -x /usr/sbin/anacron <span style=color:#f92672>||</span> <span style=color:#f92672>(</span> cd / <span style=color:#f92672>&amp;&amp;</span> run-parts --report /etc/cron.monthly <span style=color:#f92672>)</span>
 <span style=color:#ae81ff>15</span> <span style=color:#ae81ff>00</span> <span style=color:#ae81ff>5</span>    * * *   root    sh /home/home1/107GB/misc/backup/conference_backup_rule.sh
 <span style=color:#ae81ff>16</span> <span style=color:#75715e>#</span>
</code></pre></div><p>時間格式</p><table><thead><tr><th>分鐘</th><th>小時</th><th>日期</th><th>月份</th><th>星期</th><th>指令名稱</th></tr></thead><tbody><tr><td>0-59</td><td>0-23</td><td>1-31</td><td>1-12</td><td>0-6</td><td>指令/參數</td></tr><tr><td>*</td><td>任何時間都可以接受</td><td></td><td></td><td></td><td></td></tr><tr><td>,</td><td>適用時間，15,35,* * * * 每天 15 分與 35 分執行指令</td><td></td><td></td><td></td><td></td></tr><tr><td>-</td><td>範圍時間，0 12-15 * * * * 每天 12 點到 15 點執行指令</td><td></td><td></td><td></td><td></td></tr><tr><td>/</td><td>每隔多久時間，例如 */10 * * * * 就是每 10 分鐘執行指令一次</td><td></td><td></td><td></td><td></td></tr></tbody></table></div><div class="d-flex flex-row justify-content-around"><h3 class="mb-1 mt-1 text-left mr-4"><a href=/blog/2019-08-12-flutter-button-route/ title="flutter Button route 應用"><i class="nav-menu fas fa-chevron-circle-left"></i></a></h3><h3 class="mb-1 mt-1 text-left ml-4"><a href=/blog/2019-09-28-flutter-data-table/ title=資料表實現><i class="nav-menu fas fa-chevron-circle-right"></i></a></h3></div></main><footer class="mt-2 mb-4 text-center"><span class=markdownify>short copyright message</span>
<span>&#183;
<i><a href=https://github.com/darshanbaral/aafu>aafu</a></i>
by
<a href=https://www.darshanbaral.com/>darshan</a></span></footer></body></html>