<!doctype html><html lang=en-us style=max-width:1000px;margin:auto><head><title>Kevin Blog</title><meta name=theme-color content><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta name=description content="Kevin learning"><meta name=author content="Kevin Chen"><meta name=generator content="aafu theme by Darshan in Hugo 0.83.0"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.15.2/css/all.css integrity=sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu crossorigin=anonymous><link rel=stylesheet href=https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Didact+Gothic%7CRoboto:400%7CRoboto+Mono"><link rel=stylesheet href=/css/aafu_pinkish.css><link rel=stylesheet href=/css/aafu.css><script>var themeColor=document.querySelector("meta[name=theme-color]");window.onload=()=>{themeColor.content=getComputedStyle(document.body)["background-color"];let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")},window.onresize=()=>{let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")}</script></head><body class=container><main style="min-height:calc(100vh - 60px)"><div class="d-flex flex-row row p-2"><h3 class="main-menu mr-3"><a href=https://cch0124.github.io/>Home</a></h3><h3 class="main-menu mr-3"><a href=/blog>Blog</a></h3><h3 class="main-menu mr-3"><a href=/project>Project</a></h3><h3 class="main-menu mr-3"><a href=/life>Life</a></h3><h3 class="main-menu mr-3"><a href=/kubernetes>Kubernetes</a></h3><h3 class="main-menu mr-3"><a href=/code>Coding</a></h3></div><div class=mb-3><h1 class=top-h1 style=font-size:2.75em>路由器基本介紹</h1><p class=mb-1>March 22, 2016</p><p>&mdash;</p></div><div class=content><h2 id=router-介紹>Router 介紹</h2><ul><li>Routing<ul><li>是決定網路封包要如何送往外部網路到達目的地的過程</li></ul></li><li>Router<ul><li>會取得達到路由所必須的資訊，並加以維護，而為了取得並維護這樣的路由資訊，必須使用路由協定</li><li>最主要的工作是決定要將網路封包送往何處</li></ul></li></ul><p>為了要讓封包送往目的地，必須學習以下</p><ol><li>知道目的端的位址在哪裡</li><li>標示出來源端的位址，並把它學習起來</li><li>尋找這個封包可能要送往的路徑有哪些</li><li>從可能的路徑中選出最佳路徑</li><li>維護並更新這些路由所需的資料</li></ol><blockquote><p>Switch 也可以把封包轉發到目的地，它與 Router 運作方式不同。</p></blockquote><h2 id=路由器轉發封包決定方式>路由器轉發封包決定方式</h2><p>根據 <code>Routing Table</code> 的資料來決定如何轉發資料封包</p><h3 id=static-route>Static Route</h3><ul><li>手動輸入</li><li>速度快<ul><li>不須要經過學習</li></ul></li><li>網路拓樸若有任何的改變，管理人員必須更新這些資料到路由器設備中</li><li>比較適合幾乎不會有變動的網路拓樸</li></ul><h3 id=dynamic-route>Dynamic Route</h3><ul><li>不須要手動輸入</li><li>路由器設備之間去協調<ul><li>互相交換並學習這些資料</li></ul></li><li>只要做 <code>Routing Protocol</code> 的設定</li><li>較耗費系統資源，速度也稍微慢<ul><li>系統需要時間去做學習的動作</li><li>需要一點時間才能把 <code>Routing Table</code> 建立得比較完整\</li></ul></li><li>網路架構有任何的改變，路由設備會自我學習維護 <code>Routing Table</code></li></ul><h3 id=administrative-distance>Administrative Distance</h3><ul><li>來決定每一種不同路由協定的可靠程度</li><li>AD 值是一個從 0～255 的整數，每一種路由協定都有一個 AD 值與之對應<ul><li>其值越低，代表可靠程度越高</li></ul></li></ul><h4 id=路由方式對應-ad-值>路由方式對應 AD 值</h4><table><thead><tr><th style=text-align:left>路由方式</th><th style=text-align:left>AD 預設值</th></tr></thead><tbody><tr><td style=text-align:left>直連</td><td style=text-align:left>0</td></tr><tr><td style=text-align:left>靜態路由</td><td style=text-align:left>1</td></tr><tr><td style=text-align:left>EIGRP Summary Route</td><td style=text-align:left>5</td></tr><tr><td style=text-align:left>外部 BGP</td><td style=text-align:left>20</td></tr><tr><td style=text-align:left>EIGRP</td><td style=text-align:left>90</td></tr><tr><td style=text-align:left>IGRP</td><td style=text-align:left>100</td></tr><tr><td style=text-align:left>OSPF</td><td style=text-align:left>110</td></tr><tr><td style=text-align:left>RIPv1、RIPv2</td><td style=text-align:left>120</td></tr><tr><td style=text-align:left>EGP(Exterior Gateway Protocol)</td><td style=text-align:left>140</td></tr><tr><td style=text-align:left>External EIGRP</td><td style=text-align:left>170</td></tr><tr><td style=text-align:left>Internal BGP</td><td style=text-align:left>200</td></tr><tr><td style=text-align:left>DHCP-learned</td><td style=text-align:left>254</td></tr><tr><td style=text-align:left>未知</td><td style=text-align:left>255</td></tr></tbody></table><h3 id=autonomous-system>Autonomous System</h3><p>自治系統（Autonomous System）簡稱 AS，所有處於同樣管理網域（Administrative Domain）下所有網路的集合</p><h4 id=interior-gateway-protocol>Interior Gateway Protocol</h4><ul><li>RIPv1</li><li>RIPv2</li><li>IGRP</li><li>EIGRP</li><li>OSPF</li></ul><h4 id=exterior-gateway-protocol>Exterior Gateway Protocol</h4><ul><li>BGP</li></ul><h2 id=distance-vector>Distance Vector</h2><p><img src=https://i.imgur.com/SMb1doP.png alt></p><p>利用方向與所必須經過的設備數目（Hops）來決定路徑，並會在鄰近的路由器設備間將這些路徑資料互相分享。</p><ul><li>會傳遞整份的資料<ul><li>傳遞給鄰近的路由器設備</li></ul></li><li>路由資料沒任何改變<ul><li>整份路由資料發送出來</li></ul></li></ul><p>大部分演算法可能會使用下列的特徵來決定某個路徑的評判值為何：</p><ul><li>必須經過的網路設備數目（Hops Count）</li><li>所使用的頻寬（Bandwidth）<ul><li>頻寬越大的路徑，當然就越好，例如100Mbps的乙太網路路徑就比10Mbps的乙太網路路徑還要好</li></ul></li><li>Delay<ul><li>也就是從來源端傳送網路封包到目的端所必須花費的時間</li></ul></li><li>Load<ul><li>網路資源數量</li></ul></li><li>網路品質信賴度（Reliability）<ul><li>大部分是指網路線的資料錯誤率</li></ul></li><li>最大傳輸單元（Maximum Transmission Unit，MTU）<ul><li>這是指在路徑上所有線路中的最大可接受資料傳輸單元長度</li></ul></li></ul><blockquote><p>有 Routing by rumor 問題</p></blockquote><h2 id=link-state>Link State</h2><p><img src=https://i.imgur.com/cPM3Vv8.png alt></p><p>可以在網路中發送一次完整訊息，下次有更新或更改，將透過網路發送更改，這是 Link State 工作方式。Link State 透過群播僅告知所有其他路由器其鄰居和鏈路。在 Link State 中，更新與決策過程是獨立的。</p><p>是使用最短路徑演算法（Shortest Path First）。</p><ul><li>只會傳遞少部分更新的路由資料<ul><li>傳遞到各個路由器設備中</li></ul></li></ul><p>主要維護 3 個表</p><ul><li>Neighbour table</li><li>Routing Table</li><li>Topology Table</li></ul><h2 id=balanced-hybrid>Balanced Hybrid</h2><p>綜合了Distance Vector和Link State兩種演算法</p><h2 id=ref>Ref</h2><p><a href=http://www.routexp.com/2017/05/routing-basics-distance-vector-vs-link.html?>distance-vector 比較 link</a></p><p><a href=https://www.netadmin.com.tw/index.aspx>netadmin</a></p></div><div class="d-flex flex-row justify-content-around"><h3 class="mb-1 mt-1 text-left mr-4"><a href=/blog/2016-02-27-tcp-wrapper/ title="TCP wrapper"><i class="nav-menu fas fa-chevron-circle-left"></i></a></h3><h3 class="mb-1 mt-1 text-left ml-4"><a href=/blog/2016-03-28-switch/ title=交換器基本介紹><i class="nav-menu fas fa-chevron-circle-right"></i></a></h3></div></main><footer class="mt-2 mb-4 text-center"><span class=markdownify>short copyright message</span>
<span>&#183;
<i><a href=https://github.com/darshanbaral/aafu>aafu</a></i>
by
<a href=https://www.darshanbaral.com/>darshan</a></span></footer></body></html>