<!doctype html><html lang=en-us style=max-width:1000px;margin:auto><head><title>Kevin Blog</title><meta name=theme-color content><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta name=description content="Kevin learning"><meta name=author content="Kevin Chen"><meta name=generator content="aafu theme by Darshan in Hugo 0.83.0"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=/favicon.ico><link rel=stylesheet href=/css/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.15.2/css/all.css integrity=sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu crossorigin=anonymous><link rel=stylesheet href=https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Didact+Gothic%7CRoboto:400%7CRoboto+Mono"><link rel=stylesheet href=/css/aafu_pinkish.css><link rel=stylesheet href=/css/aafu.css><script>var themeColor=document.querySelector("meta[name=theme-color]");window.onload=()=>{themeColor.content=getComputedStyle(document.body)["background-color"];let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")},window.onresize=()=>{let a=document.querySelector(".accordion.active");a&&(a.nextElementSibling.style.maxHeight=a.nextElementSibling.scrollHeight+"px")}</script></head><body class=container><main style="min-height:calc(100vh - 60px)"><div class="d-flex flex-row row p-2"><h3 class="main-menu mr-3"><a href=https://cch0124.github.io/>Home</a></h3><h3 class="main-menu mr-3"><a href=/blog>Blog</a></h3><h3 class="main-menu mr-3"><a href=/project>Project</a></h3><h3 class="main-menu mr-3"><a href=/life>Life</a></h3><h3 class="main-menu mr-3"><a href=/kubernetes>Kubernetes</a></h3><h3 class="main-menu mr-3"><a href=/code>Coding</a></h3></div><div class=mb-3><h1 class=top-h1 style=font-size:2.75em>kubernetes - day12</h1><p class=mb-1>September 2, 2020</p><p>&mdash;</p></div><div class=content><p><code>POD</code> 的調度過程，前面文章都有提到過。<code>kubelete</code> 對於容器的非主行程錯誤無法去感覺，需要依賴於 <code>liveness probe</code> 機制。再想想，如果 <code>POD</code> 被惡意刪除或是節點出現問題又該如何解決 ? 我們都知道 <code>kubelet</code> 是運行在每個節點上的必要代理器，因此節點故障，對於 <code>POD</code> 的各種資源都無法有保證性。對於這些問題我們必須使用節點外的 <code>POD</code> 控制器實現該保證性。</p><p><code>POD</code> 控制器由主節點上的 <code>kube-controller-manager</code> 實現，常見的控制器有 <code>ReplicaSet</code>、<code>Deployment</code>、<code>DaemonSet</code>、<code>StatefulSet</code>、<code>Job</code> 等，它們實現不同的想法來管理 <code>POD</code> 資源。當然 <code>API Server</code> 不能少，它將負責儲存使用者的清單資源，再由控制器去實現使用者想要的狀態，在這之間控制器會透過 <code>API Server</code> 提供的接口進行不斷的監聽資源狀態，因此發生故障、更新等變動系統狀態的原因會不斷的向用戶想要的狀態不斷接近，而 <code>status</code> 的狀態就是紀錄當前狀態。</p><h2 id=控制器與-pod>控制器與 POD</h2><p>正常來說，一個 <code>POD</code> 控制器資源應該至少有三個字段</p><ul><li>selector<ul><li>關聯匹配的 <code>POD</code>，並管控其 <code>POD</code></li></ul></li><li>replica<ul><li>期望的 <code>POD</code> 數量</li></ul></li><li>POD Template<ul><li>指定控制器創建 <code>POD</code> 資源的配置訊息</li><li>相似於定義 <code>POD</code> 資源</li></ul></li></ul><h2 id=結論>結論</h2><p>此篇文章用於了解，<code>POD</code> 資源被控制器控管的好處，以及如何定義控制器資源。再下面的章節將會介紹一些控制器。</p><h2 id=參考資源>參考資源</h2><ul><li><a href=https://feisky.gitbooks.io/kubernetes/content/components/controller-manager.html>feisky - controller-manager</a></li></ul></div><div class="d-flex flex-row justify-content-around"><h3 class="mb-1 mt-1 text-left mr-4"><a href=/kubernetes/2020-09-01-pod-resource-limit-request/ title="kubernetes - day11"><i class="nav-menu fas fa-chevron-circle-left"></i></a></h3><h3 class="mb-1 mt-1 text-left ml-4"><a href=/kubernetes/2020-09-03-replicaset/ title="kubernetes - day13"><i class="nav-menu fas fa-chevron-circle-right"></i></a></h3></div></main><footer class="mt-2 mb-4 text-center"><span class=markdownify>short copyright message</span>
<span>&#183;
<i><a href=https://github.com/darshanbaral/aafu>aafu</a></i>
by
<a href=https://www.darshanbaral.com/>darshan</a></span></footer></body></html>